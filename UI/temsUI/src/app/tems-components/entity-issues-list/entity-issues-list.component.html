<ng-container *ngIf="claims.canManage || claims.canView; else elseBlock">
  <div class="col-md-12">
    <h2 class="mt-3">
      Issues
    </h2>

    <ng-container *ngIf="claims.canManage">
      <button *ngIf="addIssueEnabled == true" mat-button (click)="addIssue()" class="d-xs-block">
        <mat-icon class="text-primary">add</mat-icon>Create issue
      </button>
      <button mat-button (click)="sortBy('priority')" class="d-xs-block">
        <mat-icon class="text-primary">import_export</mat-icon>Sort by priority
      </button>
      <button mat-button (click)="sortBy('date')" class="d-xs-block">
        <mat-icon class="text-primary">import_export</mat-icon>Sort by date
      </button>
    </ng-container>
    
    <mat-slide-toggle *ngIf="showIncludeClosed == true" class="float-right" (click)="includeClosedChanged()">
      Include Closed
    </mat-slide-toggle>
    
    <hr class="mt-3">
    
    <ng-container *ngIf="loading == true">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      <app-loading-placeholder></app-loading-placeholder>
    </ng-container>
    
    <div #issuesPanel>
      <mat-accordion>
        <div
          *ngFor="let issue of issues | paginate: { itemsPerPage: 20, currentPage: pageNumber, id: 'issues' }; let i = index">
          <app-issue-container [canManage]="claims.canManage" [issue]="issue" [statuses]="statuses" (solve)="solve((pageNumber-1)*20 + i)"
            (pinned)="ticketPinned($event, (pageNumber-1)*20 + i)" (remove)="remove((pageNumber-1)*20 + i)">
          </app-issue-container>
        </div>
      </mat-accordion>
    </div>

    <pagination-controls (pageChange)="pageNumber = $event" id="issues"
      *ngIf="issues != undefined && issues.length > 0">
    </pagination-controls>
    <div *ngIf="loading == false && (issues == undefined || issues.length == 0)">
      <img class="centerSvg" style="width: 300px;" src="assets/svgs/no-data.svg">
    </div>
  </div>
</ng-container>

<ng-template #elseBlock>
  <p class="text-center text-muted">
    Insufficient permissions.
  </p>
</ng-template>