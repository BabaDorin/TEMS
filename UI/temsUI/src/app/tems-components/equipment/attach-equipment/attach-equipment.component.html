<div [ngClass]="dialogRef == undefined ? 'card' : 'card cancel-margins'">
    <div class="card-body">
        <h2>
            {{ 'equipment.attach' | translate }}
        </h2>
        <hr>
        <p class="text-muted">
            {{ 'equipment.attachTip' | translate }} {{ equipment.definition.identifier }}.
        </p>
        <div class="row">
            <form [formGroup]="attachEquipmentFormGroup" (submit)="onSubmit(attachEquipmentFormGroup.controls)">
                <div class="col-md-6">
                    <mat-form-field>
                        <!-- Select type -->
                        <mat-label>
                            {{ 'entities.types' | translate }}
                        </mat-label>
                        <mat-select formControlName="equipmentType" (selectionChange)="typeChanged($event)">
                            <mat-option *ngFor="let type of types" [value]="type.value">
                                {{ type.label }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field>
                        <!-- Select within definitions of that type -->
                        <mat-label>
                            {{ 'equipment.availableDefinitions' | translate }}
                        </mat-label>
                        <mat-select formControlName="equipmentDefinition" (selectionChange)="filterChanged()">
                            <mat-option *ngFor="let def of definitions" [value]="def.id">
                                {{ def.identifier }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </form>
            <div class="col-md-12">
                <!-- <app-chips-autocomplete formControlName="equipmentToAttach"
                        label="Chose one or more equipemnt to attach" [autocompleteOptions]="availableEquipment">
                    </app-chips-autocomplete> -->
                <p class="text-muted">
                    <mat-icon class="text-muted">info</mat-icon>
                    {{ 'equipment.detachTip' | translate }}
                </p>
            </div>
            <div class="col-md-12">
                <ng-container *ngIf="equipmentFilter != undefined">
                    <app-ag-grid-attach-equipment 
                        [parentId]="equipment.id"
                        [equipmentFilter]="equipmentFilter" 
                        (attached)="attached($event)">
                    </app-ag-grid-attach-equipment>
                </ng-container>
            </div>
        </div>
    </div>
</div>