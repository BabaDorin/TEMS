<div class="bg-white dark:bg-[#2c2c2e] rounded-xl max-w-md w-full mx-auto overflow-hidden">
  <!-- Header -->
  <div class="px-6 py-4 border-b border-gray-200 dark:border-[#38383a]">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center flex-shrink-0">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" class="text-red-600 dark:text-red-400">
          <path d="M10 6V10M10 14H10.01M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div>
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white m-0">Delete User</h2>
        <p class="text-sm text-gray-500 dark:text-gray-400 m-0">This action cannot be undone</p>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="px-6 py-5">
    <p class="text-sm text-gray-700 dark:text-gray-300 m-0 mb-4">
      Are you sure you want to delete <span class="font-semibold">{{ getUserFullName() }}</span>?
    </p>

    <!-- Warning Box -->
    <div class="bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700/50 rounded-lg p-4 mb-4">
      <div class="flex items-start gap-3">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" class="text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5">
          <path d="M8.57465 3.21687L1.51632 14.1669C1.3687 14.4227 1.29084 14.7127 1.29016 15.0082C1.28949 15.3037 1.36602 15.5941 1.51246 15.8506C1.6589 16.1071 1.87022 16.3206 2.12501 16.4697C2.37981 16.6188 2.66931 16.6984 2.96465 16.7002H17.0813C17.3767 16.6984 17.6662 16.6188 17.921 16.4697C18.1758 16.3206 18.3871 16.1071 18.5335 15.8506C18.68 15.5941 18.7565 15.3037 18.7558 15.0082C18.7551 14.7127 18.6773 14.4227 18.5297 14.1669L11.4713 3.21687C11.3207 2.96814 11.1081 2.76284 10.8544 2.62102C10.6006 2.47921 10.3141 2.40564 10.023 2.40564C9.73189 2.40564 9.44534 2.47921 9.19162 2.62102C8.9379 2.76284 8.72528 2.96814 8.57465 3.21687Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M10 7.5V10.8333M10 14.1667H10.0083" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div>
          <p class="text-sm font-medium text-amber-800 dark:text-amber-200 m-0 mb-1">Warning</p>
          <p class="text-sm text-amber-700 dark:text-amber-300 m-0">
            <span *ngIf="isLoadingCount">Checking assigned assets...</span>
            <span *ngIf="!isLoadingCount && assetCount === 0">This user has no assigned assets.</span>
            <span *ngIf="!isLoadingCount && assetCount > 0">
              This user has <span class="font-semibold">{{ assetCount }} asset{{ assetCount !== 1 ? 's' : '' }}</span> assigned. 
              All assets will be automatically unassigned and moved to deposit.
            </span>
          </p>
        </div>
      </div>
    </div>

    <!-- What will be deleted -->
    <div class="bg-gray-50 dark:bg-[#3a3a3c] rounded-lg p-4">
      <p class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2">This will remove the user from:</p>
      <ul class="space-y-2 m-0 pl-0 list-none">
        <li class="flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="text-gray-400">
            <path d="M13.333 4L6 11.333 2.667 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Keycloak (Identity Provider)
        </li>
        <li class="flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="text-gray-400">
            <path d="M13.333 4L6 11.333 2.667 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Identity Server
        </li>
        <li class="flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="text-gray-400">
            <path d="M13.333 4L6 11.333 2.667 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          TEMS Database
        </li>
      </ul>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700/50 rounded-lg">
      <p class="text-sm text-red-600 dark:text-red-400 m-0">{{ error }}</p>
    </div>
  </div>

  <!-- Footer -->
  <div class="px-6 py-4 border-t border-gray-200 dark:border-[#38383a] flex items-center justify-end gap-3">
    <button
      (click)="close()"
      [disabled]="isDeleting"
      class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition disabled:opacity-50">
      Cancel
    </button>
    <button
      (click)="confirmDelete()"
      [disabled]="isDeleting || isLoadingCount"
      class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center gap-2">
      <span *ngIf="isDeleting" class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></span>
      <span>{{ isDeleting ? 'Deleting...' : 'Delete User' }}</span>
    </button>
  </div>
</div>
