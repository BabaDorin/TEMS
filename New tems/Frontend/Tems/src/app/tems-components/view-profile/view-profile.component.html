<!-- Loading State -->
<div *ngIf="loading" class="flex items-center justify-center min-h-[60vh]">
  <div class="text-center">
    <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#007aff] mb-4"></div>
    <p class="text-gray-500 dark:text-gray-400">Loading profile...</p>
  </div>
</div>

<!-- Error State -->
<div *ngIf="error && !loading" class="flex items-center justify-center min-h-[60vh]">
  <div class="text-center max-w-md">
    <mat-icon class="!w-16 !h-16 !text-6xl text-red-500 mb-4">error_outline</mat-icon>
    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-2" style="letter-spacing: -0.5px;">Error Loading Profile</h2>
    <p class="text-gray-500 dark:text-gray-400 mb-6">We couldn't load your profile. Please try again.</p>
    <button mat-flat-button (click)="loadProfile()" class="!bg-[#007aff] !text-white !rounded-lg !h-11 !px-6 !font-medium hover:!bg-[#0051d5]">
      <mat-icon class="mr-2">refresh</mat-icon>
      Retry
    </button>
  </div>
</div>

<!-- Profile Content -->
<div *ngIf="profile && !loading" class="min-h-screen bg-[#f5f5f7] dark:bg-[#1c1c1e] px-4 py-6">
  <div class="max-w-4xl mx-auto space-y-4">
    <!-- Profile Header Card -->
    <div class="bg-white dark:bg-[#2c2c2e] border border-gray-200 dark:border-[#2f2f31] rounded-xl shadow-sm overflow-hidden">
      <div class="p-6">
        <div class="flex items-center space-x-4">
          <!-- Avatar -->
          <div class="flex-shrink-0">
            <div class="w-20 h-20 rounded-full overflow-hidden bg-[#007aff]">
              <img *ngIf="profile.avatarUrl" [src]="profile.avatarUrl" [alt]="profile.name" class="w-full h-full object-cover">
              <div *ngIf="!profile.avatarUrl" class="w-full h-full flex items-center justify-center">
                <span class="text-3xl font-semibold text-white">{{ profile.name.charAt(0).toUpperCase() }}</span>
              </div>
            </div>
          </div>

          <!-- Name and Email -->
          <div class="flex-1 min-w-0">
            <h1 class="text-2xl font-semibold text-gray-900 dark:text-white mb-1" style="letter-spacing: -0.5px;">{{ profile.name }}</h1>
            <div class="flex items-center text-gray-500 dark:text-gray-400">
              <mat-icon class="!w-4 !h-4 !text-base mr-1.5">email</mat-icon>
              <span class="text-sm truncate">{{ profile.email }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Details Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Account Information -->
      <div class="bg-white dark:bg-[#2c2c2e] border border-gray-200 dark:border-[#2f2f31] rounded-xl shadow-sm overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-100 dark:border-[#38383a]">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white" style="letter-spacing: -0.3px;">Account Information</h2>
        </div>

        <div class="divide-y divide-gray-100 dark:divide-[#38383a]">
          <div class="flex justify-between items-center px-6 py-4">
            <span class="text-gray-600 dark:text-gray-400">Full Name</span>
            <span class="text-gray-900 dark:text-white font-medium">{{ profile.name }}</span>
          </div>
          <div class="flex justify-between items-center px-6 py-4">
            <span class="text-gray-600 dark:text-gray-400">Email Address</span>
            <span class="text-gray-900 dark:text-white truncate ml-4 max-w-[200px]">{{ profile.email }}</span>
          </div>
          <div class="flex justify-between items-center px-6 py-4">
            <span class="text-gray-600 dark:text-gray-400">Member Since</span>
            <span class="text-gray-900 dark:text-white">{{ profile.createdAt | date:'mediumDate' }}</span>
          </div>
        </div>
      </div>

      <!-- Activity & Stats -->
      <div class="bg-white dark:bg-[#2c2c2e] border border-gray-200 dark:border-[#2f2f31] rounded-xl shadow-sm overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-100 dark:border-[#38383a]">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white" style="letter-spacing: -0.3px;">Activity Overview</h2>
        </div>

        <div class="p-6">
          <div class="grid grid-cols-2 gap-3">
            <div class="bg-[#f5f5f7] dark:bg-[#3a3a3c] rounded-lg p-4 text-center border border-gray-200 dark:border-[#2f2f31]">
              <div class="text-2xl font-semibold text-[#007aff] mb-1">0</div>
              <div class="text-xs text-gray-600 dark:text-gray-400">Assets Assigned</div>
            </div>
            <div class="bg-[#f5f5f7] dark:bg-[#3a3a3c] rounded-lg p-4 text-center border border-gray-200 dark:border-[#2f2f31]">
              <div class="text-2xl font-semibold text-[#007aff] mb-1">0</div>
              <div class="text-xs text-gray-600 dark:text-gray-400">Active Tickets</div>
            </div>
            <div class="bg-[#f5f5f7] dark:bg-[#3a3a3c] rounded-lg p-4 text-center border border-gray-200 dark:border-[#2f2f31]">
              <div class="text-2xl font-semibold text-[#34c759] mb-1">0</div>
              <div class="text-xs text-gray-600 dark:text-gray-400">Completed</div>
            </div>
            <div class="bg-[#f5f5f7] dark:bg-[#3a3a3c] rounded-lg p-4 text-center border border-gray-200 dark:border-[#2f2f31]">
              <div class="text-2xl font-semibold text-[#007aff] mb-1">100%</div>
              <div class="text-xs text-gray-600 dark:text-gray-400">Response</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="bg-white dark:bg-[#2c2c2e] border border-gray-200 dark:border-[#2f2f31] rounded-xl shadow-sm overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-100 dark:border-[#38383a]">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white" style="letter-spacing: -0.3px;">Quick Actions</h2>
      </div>
      <div class="p-6 grid grid-cols-1 sm:grid-cols-3 gap-3">
        <button class="flex items-center p-4 bg-[#f5f5f7] dark:bg-[#3a3a3c] hover:bg-[#e5e5e7] dark:hover:bg-[#48484a] rounded-lg border border-gray-200 dark:border-[#2f2f31] transition-colors">
          <mat-icon class="mr-3 text-[#007aff]">devices</mat-icon>
          <div class="text-left">
            <div class="font-medium text-gray-900 dark:text-white text-sm">My Assets</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Assigned equipment</div>
          </div>
        </button>

        <button class="flex items-center p-4 bg-[#f5f5f7] dark:bg-[#3a3a3c] hover:bg-[#e5e5e7] dark:hover:bg-[#48484a] rounded-lg border border-gray-200 dark:border-[#2f2f31] transition-colors">
          <mat-icon class="mr-3 text-[#007aff]">confirmation_number</mat-icon>
          <div class="text-left">
            <div class="font-medium text-gray-900 dark:text-white text-sm">My Tickets</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Support requests</div>
          </div>
        </button>

        <button class="flex items-center p-4 bg-[#f5f5f7] dark:bg-[#3a3a3c] hover:bg-[#e5e5e7] dark:hover:bg-[#48484a] rounded-lg border border-gray-200 dark:border-[#2f2f31] transition-colors">
          <mat-icon class="mr-3 text-[#007aff]">settings</mat-icon>
          <div class="text-left">
            <div class="font-medium text-gray-900 dark:text-white text-sm">Settings</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Account preferences</div>
          </div>
        </button>
      </div>
    </div>

  </div>
</div>
